<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>横州市历史介绍</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* 全局样式 */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 导航栏样式 */
        .navbar {
            background-color: #28a745;
            color: white;
            text-align: center;
            padding: 15px 0;
            width: 100%;
            transition: all 0.3s ease;
           
            top: 0;
            z-index: 1000;
        }

        .navbar.scrolled {
            background-color: rgba(40, 167, 69, 0.95);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 10px 0;
        }

        .navbar ul {
            list-style-type: none;
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .navbar ul li {
            display: inline;
        }

        .navbar ul li a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            padding: 8px 15px;
            display: block;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .navbar ul li a:hover {
            background-color: #575757;
            border-radius: 5px;
            transform: scale(1.1);
        }

        /* 主体内容 */
        .content {
            padding: 20px;
            max-width: 1100px;
            margin: 20px auto;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin-top: 100px; /* 防止导航栏重叠 */
            flex-grow: 1;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #28a745;
            font-size: 28px;
            border-bottom: 2px solid #28a745;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .section p {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        /* 历史时间轴 */
        .history-timeline ul {
            list-style-type: none;
            padding-left: 0;
        }

        .history-timeline li {
            background-color: #f1f1f1;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .history-timeline li:hover {
            background-color: #e0e0e0;
        }

        /* 历史遗址 */
        .heritage-sites {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .heritage-site {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .heritage-site:hover {
            transform: rotateY(5deg) scale(1.05);
            box-shadow: -10px 10px 20px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .heritage-site img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            transition: all 0.5s ease;
        }

        .heritage-site:hover img {
            transform: scale(1.1);
        }

        .heritage-site h3 {
            color: #28a745;
            margin-top: 15px;
        }

        .heritage-site p {
            font-size: 14px;
            color: #555;
        }

        /* 页脚样式 */
        footer {
            background-color: #28a745;
            color: white;
            text-align: center;
            padding: 10px;
            width: 100%;
            bottom: 0;
            position: relative;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .navbar ul {
                flex-direction: column;
            }
            
            .content {
                margin: 20px;
                padding: 15px;
            }
        }

        /* 添加图表容器样式 */
        .chart-container {
            width: calc(100% - 40px);
            height: 300px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 1100px;
        }

        /* 在小屏幕上的响应式调整 */
        @media (max-width: 768px) {
            .chart-container {
                width: calc(100% - 20px);
                margin: 10px auto;
                padding: 10px;
            }
        }

        /* 历史名人卡片样式优化 */
        .historical-figures {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 20px;
            opacity: 1;
            transition: all 0.3s ease;
        }

        .figure-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            opacity: 1;
            transform: translateY(0);
        }

        .figure-card .image-container {
            position: relative;
            width: 100%;
            height: 300px;
            overflow: hidden;
        }

        .figure-card .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .figure-card .content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .figure-card .content-overlay {
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.8));
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            color: white;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 1;
        }

        .figure-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(40, 167, 69, 0.2);
        }

        .figure-card:hover .content-overlay {
            transform: translateY(0);
        }

        .figure-card .content {
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .figure-card h3 {
            margin: 0;
            color: #28a745;
            font-size: 24px;
            font-weight: 600;
        }

        .figure-card .time-period {
            color: #666;
            font-style: italic;
            margin: 8px 0;
            font-size: 16px;
            display: inline-block;
            padding: 4px 12px;
            background: #f0f0f0;
            border-radius: 20px;
        }

        .figure-card .description {
            color: #444;
            line-height: 1.6;
            margin-top: 15px;
            font-size: 15px;
        }

        @media (max-width: 768px) {
            .historical-figures {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .figure-card .image-container {
                height: 250px;
            }
        }

        /* 非物质文化遗产样式 */
        .cultural-heritage {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .heritage-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            transition: transform 0.3s ease;
        }

        .heritage-item:hover {
            transform: translateX(10px);
        }

        .heritage-item h3 {
            color: #28a745;
            margin-bottom: 10px;
        }

        .heritage-item p {
            color: #666;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .historical-figures,
            .cultural-heritage {
                grid-template-columns: 1fr;
            }
        }

        /* 时间轴容器样式 */
        .timeline {
            position: relative;
            padding: 20px 0;
            margin: 40px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #28a745;
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            width: 100%;
            display: flex;
            justify-content: center;
            opacity: 0;
            transform: translateX(-100px);
            transition: all 0.8s ease;
        }

        .timeline-item:nth-child(even) {
            transform: translateX(100px);
        }

        .timeline-item.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* 时间节点圆点 */
        .timeline-dot {
            position: absolute;
            left: 50%;
            width: 16px;
            height: 16px;
            background: #28a745;
            border-radius: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        /* 时间轴内容卡片 */
        .timeline-content {
            width: 45%;
            padding: 0 20px;
            position: relative;
        }

        /* 左右交错布局 */
        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: auto;
            text-align: left;
        }

        .timeline-item:nth-child(even) .timeline-content {
            margin-right: auto;
            text-align: right;
        }

        /* 时间日期样式 */
        .timeline-date {
            color: #28a745;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        /* 内容卡片样式 */
        .timeline-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .timeline-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .timeline-card h3 {
            color: #28a745;
            margin: 0 0 10px 0;
        }

        .timeline-card p {
            margin: 0;
            color: #666;
        }

        /* 图标样式 */
        .timeline-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .timeline-item:nth-child(odd) .timeline-icon {
            left: -60px;
        }

        .timeline-item:nth-child(even) .timeline-icon {
            right: -60px;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .timeline::before {
                left: 30px;
            }

            .timeline-content {
                width: calc(100% - 80px);
                margin-left: 80px !important;
                text-align: left !important;
            }

            .timeline-dot {
                left: 30px;
            }

            .timeline-icon {
                display: none;
            }
        }

        /* 添加进度条样式 */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(to right, #28a745, #34d058);
            z-index: 1000;
            transition: width 0.2s ease;
        }

        /* 添加标题动画和样式 */
        .hero-section {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)), 
                        url('path/to/your-background-image.jpg') center/cover;
            margin-bottom: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .hero-title {
            font-size: 2.5em;
            color: #28a745;
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
        }

        .hero-description {
            font-size: 1.2em;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease 0.2s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 添加文字渐变效果 */
        .highlight-text {
            background: linear-gradient(120deg, #28a745, #34d058);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        /* 添加装饰元素 */
        .decoration-line {
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #28a745, transparent);
            margin: 20px auto;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2em;
            }
            
            .hero-description {
                font-size: 1.1em;
                padding: 0 15px;
            }
        }

        /* 添加图片画廊样式 */
        .gallery-section {
            padding: 20px;
            margin: 40px 0;
        }

        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            cursor: pointer;
        }

        .gallery-item img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            bottom: -100%;
            left: 0;
            right: 0;
            background: rgba(40, 167, 69, 0.9);
            padding: 20px;
            color: white;
            transition: bottom 0.3s ease;
        }

        .gallery-item:hover .gallery-overlay {
            bottom: 0;
        }

        /* 添效果 */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox img {
            max-width: 90%;
            max-height: 90vh;
        }

        /* 添加年代择器样式 */
        .era-selector {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            margin: 40px 0;
        }

        .era-selector h3 {
            color: #28a745;
            text-align: center;
            font-size: 1.8em;
            margin-bottom: 30px;
            position: relative;
        }

        .era-selector h3::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #28a745, transparent);
        }

        .era-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .era-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            background: white;
            color: #28a745;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .era-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(40, 167, 69, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .era-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .era-btn.active {
            background: #28a745;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.2);
        }

        /* 更新年代选择器的样式 */
        .era-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            min-height: 400px;
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 40px;
            position: relative;
            overflow: hidden;
        }

        .era-image-container {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            height: 400px;
        }

        .era-image-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 60%, rgba(0,0,0,0.6));
            pointer-events: none;
        }

        .era-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        .era-image-container:hover img {
            transform: scale(1.08);
        }

        .era-text-content {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px 0;
        }

        .era-text-content h3 {
            color: #28a745;
            font-size: 2em;
            margin-bottom: 25px;
            position: relative;
            padding-bottom: 15px;
            font-weight: 600;
        }

        .era-text-content h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #28a745, transparent);
            border-radius: 2px;
        }

        .era-text-content p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 30px;
            font-size: 1.1em;
            text-align: justify;
        }

        .era-details {
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.08);
            margin-top: auto;
        }

        .era-details h4 {
            color: #28a745;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .era-details h4::before {
            content: '';
            width: 4px;
            height: 20px;
            background: #28a745;
            border-radius: 2px;
        }

        .era-details ul {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .era-details li {
            padding: 10px 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s ease;
        }

        .era-details li:hover {
            transform: translateX(5px);
        }

        .era-details li i {
            color: #28a745;
            font-size: 1.1em;
        }

        /* 添加响应式布局 */
        @media (max-width: 992px) {
            .era-content {
                grid-template-columns: 1fr;
                padding: 25px;
            }

            .era-image-container {
                height: 300px;
            }

            .era-details ul {
                grid-template-columns: 1fr;
            }
        }

        /* 添加加载动画 */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .era-content.show {
            opacity: 1;
            transform: translateY(0);
        }

        .era-content.show .era-image-container {
            animation: fadeInScale 0.8s ease forwards;
        }

        .era-content.show .era-text-content {
            animation: fadeInScale 0.8s ease 0.2s forwards;
        }

        /* 添加滑动指示器 */
        .scroll-indicator {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }

        .scroll-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(40, 167, 69, 0.2);
            transition: all 0.3s ease;
        }

        .scroll-dot.active {
            background: #28a745;
            transform: scale(1.2);
        }

        /* 返顶部按钮样式 */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            background: #218838;
        }

        /* 历史概述区域样式 */
        .history-overview {
            padding: 30px;
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .history-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .history-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .history-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: #28a745;
            transition: all 0.3s ease;
        }

        .history-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(40, 167, 69, 0.12);
        }

        .history-card:hover::before {
            width: 6px;
        }

        .period-tag {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: rgba(40, 167, 69, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .card-icon i {
            color: #28a745;
            font-size: 1.5em;
        }

        .card-title {
            color: #28a745;
            font-size: 1.4em;
            margin: 15px 0;
        }

        .card-text {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .era-info {
            color: #888;
            font-style: italic;
        }

        .read-more {
            color: #28a745;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .read-more:hover {
            color: #218838;
            gap: 10px;
        }

        .highlight-box {
            background: rgba(40, 167, 69, 0.05);
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 10px 10px 0;
        }

        .highlight-box p {
            color: #444;
            font-size: 1.1em;
            line-height: 1.8;
            margin: 0;
        }

        .history-content {
            padding: 20px 0;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .stat-box {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.1);
        }

        .stat-number {
            font-size: 2.5em;
            color: #28a745;
            font-weight: bold;
            margin: 15px 0;
        }

        .stat-label {
            color: #666;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            .history-cards {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .history-overview {
                padding: 20px;
            }
        }

        .ripple {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            pointer-events: none;
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* 为每个列表项添加延迟动画 */
        .era-content.show .era-details li:nth-child(1) { transition-delay: 0.3s; }
        .era-content.show .era-details li:nth-child(2) { transition-delay: 0.4s; }
        .era-content.show .era-details li:nth-child(3) { transition-delay: 0.5s; }
        .era-content.show .era-details li:nth-child(4) { transition-delay: 0.6s; }

        /* 分类筛选器样式 */
        .figure-filter {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 2px solid #28a745;
            border-radius: 25px;
            background: transparent;
            color: #28a745;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .filter-btn.active {
            background: #28a745;
            color: white;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2);
        }

        /* 优化卡片样式 */
        .figure-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .figure-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .quick-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .achievement, .era {
            background: rgba(255, 255, 255, 0.9);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            color: #28a745;
        }

        .achievements {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .achievements h4 {
            color: #28a745;
            margin-bottom: 10px;
        }

        .achievements ul {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .achievements li {
            background: #f8f9fa;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            text-align: center;
            color: #666;
        }

        .details-btn {
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .details-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        /* 分页器样式 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 40px;
            gap: 15px;
        }

        .page-numbers {
            display: flex;
            gap: 10px;
        }

        .page-numbers span {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-numbers span.active {
            background: #28a745;
            color: white;
        }

        .prev-page, .next-page {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            color: #28a745;
            transition: all 0.3s ease;
        }

        .prev-page:hover, .next-page:hover {
            transform: scale(1.2);
        }

        /* 模态框样式 */
        .figure-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .figure-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .figure-modal.active .modal-content {
            transform: translateY(0);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: #28a745;
            transform: rotate(90deg);
        }
    </style>
</head>
<body>

    <div class="scroll-progress"></div>

    <!-- 导航栏 -->
    <div class="navbar">
        <ul>
            <li><a href="首页.html">首页</a></li>
            <li><a href="历史.html">历史</a></li>
            <li><a href="经济.html">经济</a></li>
            <li><a href="特产.html">特产</a></li>
            <li><a href="风景.html">风景</a></li>
            <li><a href="关于我们.html">关于我们</a></li>
        </ul>
    </div>

    <div class="chart-container">
        <canvas id="historyChart"></canvas>
    </div>

    <!-- 主体内容 -->
    <div class="content">
    
        <header class="hero-section">
            <h1 class="hero-title">
                <span class="highlight-text">横州市历史介</span>
            </h1>
            <div class="decoration-line"></div>
            <p class="hero-description">
                横州市，<span class="highlight-text">拥有悠久的历史</span>和<span class="highlight-text">丰富的文化遗产</span>，
                是南宁周边地区历史的重要组成部分。这片土地见证了数千年的文明演变，
                从古代的边陲重镇到现代的化名城，横承载着深厚的历史积和文化底蕴。
                在这里，您可以感受到历史的脉动，探索文化的魅力，领略横州独特的人文风采。
            </p>
            <div class="quick-facts">
                <div class="fact-item">
                    <i class="fas fa-history"></i>
                    <span>2000+年历史</span>
                </div>
                <div class="fact-item">
                    <i class="fas fa-landmark"></i>
                    <span>50+处历史遗迹</span>
                </div>
                <div class="fact-item">
                    <i class="fas fa-culture"></i>
                    <span>丰富文化遗产</span>
                </div>
            </div>
        </header>

        <!-- 历史概述 -->
        <section class="section history-overview">
            <h2>历史概述</h2>
            
            <div class="history-cards">
                <div class="history-card">
                    <span class="period-tag">远古时期</span>
                    <div class="card-icon">
                        <i class="fas fa-landmark"></i>
                    </div>
                    <h3 class="card-title">文明起源</h3>
                    <p class="card-text">横州最早的人类活动可以追溯到新石器时代，这片土地见证了华南地区早期文明的发展。</p>
                    <div class="card-footer">
                        <span class="era-info">新石器时代</span>
                        <a href="#" class="read-more">了解更多 <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
                
                <div class="history-card">
                    <span class="period-tag">秦汉时期</span>
                    <div class="card-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <h3 class="card-title">行政建制</h3>
                    <p class="card-text">秦统一后设立郡县，横州成为重要的行政区划。汉代时期，里发展成为南方重要的军事和文化中心。</p>
                    <div class="card-footer">
                        <span class="era-info">秦汉时代</span>
                        <a href="#" class="read-more">了解更多 <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>

                <div class="history-card">
                    <span class="period-tag">唐宋时期</span>
                    <div class="card-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3 class="card-title">文化繁荣</h3>
                    <p class="card-text">唐宋时期，横州迎来了文化和经济的黄金时代，商贸繁荣，文化交流频繁，城市建设日益完善。</p>
                    <div class="card-footer">
                        <span class="era-info">唐宋时代</span>
                        <a href="#" class="read-more">了解更多 <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
            </div>

            <div class="history-content">
                <div class="highlight-box">
                    <p>横州历史悠久，文化底蕴深厚，是中国南方重要的历史文化名城之一。</p>
                </div>
                
                <div class="stats-container">
                    <div class="stat-box">
                        <div class="card-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <div class="stat-number" data-value="2000">0</div>
                        <div class="stat-label">年文明史</div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="card-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="stat-number" data-value="50">0</div>
                        <div class="stat-label">处历史遗迹</div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="card-icon">
                            <i class="fas fa-scroll"></i>
                        </div>
                        <div class="stat-number" data-value="30">0</div>
                        <div class="stat-label">项非遗文化</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 在 content div 中添加或更新年代选择器部分 -->
        <div class="era-selector">
            <h3>选择历史年代</h3>
            <div class="era-buttons">
                <button class="era-btn" data-era="qin">秦朝</button>
                <button class="era-btn" data-era="han">汉代</button>
                <button class="era-btn" data-era="tang">唐宋</button>
                <button class="era-btn" data-era="ming">明清</button>
                <button class="era-btn" data-era="modern">近现代</button>
            </div>
            <!-- 添加内容显示区域 -->
            <div class="era-content">
                <!-- 内容将通过 JavaScript 动态加载 -->
            </div>
        </div>

        <!-- 历史时间轴 -->
        <section class="section history-timeline">
            <h2>历史时间轴</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">公元前221年</div>
                        <div class="timeline-card">
                            <h3>秦朝时期</h3>
                            <p>横州市首次设立为郡，成为行政区域的一部分。</p>
                            <div class="timeline-icon">
                                <i class="fas fa-landmark"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">汉代</div>
                        <div class="timeline-card">
                            <h3>文化交流繁荣</h3>
                            <p>横州市成为通往南方的重要交通枢纽，文化交繁荣。</p>
                            <div class="timeline-icon">
                                <i class="fas fa-road"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">唐宋时期</div>
                        <div class="timeline-card">
                            <h3>商贸繁荣</h3>
                            <p>横州市地区繁荣，商贸发达，成为广西地区的重要城市之一。</p>
                            <div class="timeline-icon">
                                <i class="fas fa-store"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">明清时期</div>
                        <div class="timeline-card">
                            <h3>化交流</h3>
                            <p>横州市迎来了更多的文化交流，地方经济民生有所改善。城市设日益完善，商贸往来频繁。</p>
                            <div class="timeline-icon">
                                <i class="fas fa-book"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">近代</div>
                        <div class="timeline-card">
                            <h3>城市发展</h3>
                            <p>随着近代化进程的推进，横州市开始进行现代化建，教育、交通等基础设施步完善。</p>
                            <div class="timeline-icon">
                                <i class="fas fa-city"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">现代</div>
                        <div class="timeline-card">
                            <h3>蓬勃发展</h3>
                            <p>横州市成为广西的重要城市之一，经济繁荣，文化多，旅游业蓬勃发展，吸引大游客和投资</p>
                            <div class="timeline-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 历史遗址 -->
        <section class="section heritage-sites">
            <h2>历史遗址与文化遗产</h2>
            <div class="heritage-site">
                <img src="https://th.bing.com/th/id/R.8a9862e90dc93771cf14785b53f1c7d2?rik=LPW4jTJ%2b1mrs9Q&riu=http%3a%2f%2fn.sinaimg.cn%2fsinacn14%2f275%2fw640h435%2f20180709%2f82e5-hezpzwu0418643.jpg&ehk=fZF8e1I5CAo50iDTuFM2zweyOO8%2bIxTfzMbueNA8kUs%3d&risl=&pid=ImgRaw&r=0" alt="横州市古文化遗址">
                <h3>横市古文化遗址</h3>
                <p>横州市境内有许多古文化遗址，许多历史遗迹能够见证这片土地上曾经的辉煌文明。这些遗址主要分布在城区的周围，反映了横州市的历史发展。</p>
            </div>
            <div class="heritage-site">
                <img src="https://th.bing.com/th/id/R.f4f145d81f56e5ccbc40f89602bd1ea2?rik=EwVGZrvG1NIEdQ&riu=http%3a%2f%2fwww.nanning.china.com.cn%2fimages%2f2021-07%2f30%2f30ef7cff-b91e-430a-bb97-fbc3adbc5637.jpg&ehk=FTQpkS19zXhQODmx1V8FOX3TlQy%2ftXPlA7EwneTSUlo%3d&risl=&pid=ImgRaw&r=0" alt="横州市历遗迹">
                <h3>横州市历史遗迹</h3>
                <p>这些历史遗迹包括古代的宫殿、寺庙和古代墓葬，展现了横州市在不同历史时期的文化风貌。</p>
            </div>
        </section>

        <!-- 添加详情模态框 -->
        <div class="figure-modal" style="display: none;">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <div class="modal-body">
                    <!-- 模态框内容将通过 JavaScript 动态填充 -->
                </div>
            </div>
        </div>

        <!-- 添加历史文化遗产展示部分 -->
        <section class="section">
            <h2>非物质文化遗产</h2>
            <div class="cultural-heritage">
                <div class="heritage-item">
                    <h3>横州传统戏曲</h3>
                    <p>流传百年的地方戏曲艺术，展现了横州独特的民间文化特色。</p>
                </div>
                <div class="heritage-item">
                    <h3>横州间工艺</h3>
                    <p>包括传统织布、陶艺等手工艺术，是横州文化的重要组成部分。</p>
                </div>
            </div>
        </section>
    
    </div>

    <!-- 页脚 -->
    <footer>
        <p>&copy; 2024 横州历介绍。所有权利保留。</p>
    </footer>

    <script>
        const ctx = document.getElementById('historyChart').getContext('2d');
        
        const data = {
            labels: ['秦朝', '汉代', '唐宋', '明清', '近代', '现代'],
            datasets: [{
                label: '横州历史发展重要程度',
                data: [60, 75, 90, 85, 70, 95],
                fill: true,
                borderColor: '#28a745',
                backgroundColor: 'rgba(40, 167, 69, 0.2)',
                tension: 0.4
            }]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 20,
                        bottom: 10
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: '发展程度'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: '历史朝代'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: '横州历史发展演变图',
                        font: {
                            size: 20
                        }
                    },
                    legend: {
                        position: 'bottom'
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                animations: {
                    tension: {
                        duration: 1000,
                        easing: 'linear'
                    },
                    y: {
                        duration: 2000,
                        delay: (context) => context.dataIndex * 100
                    }
                }
            }
        };

        new Chart(ctx, config);

        document.addEventListener('DOMContentLoaded', function() {
            const timelineItems = document.querySelectorAll('.timeline-item');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('show');
                    }
                });
            }, {
                threshold: 0.5
            });

            timelineItems.forEach(item => {
                observer.observe(item);
            });
        });

        window.addEventListener('scroll', () => {
            const scrollProgress = document.querySelector('.scroll-progress');
            const scrollPx = document.documentElement.scrollTop;
            const winHeightPx = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = `${(scrollPx / winHeightPx) * 100}%`;
            
            scrollProgress.style.width = scrolled;
        });

        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        document.querySelectorAll('.figure-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = (y - centerY) / 20;
                const rotateY = -(x - centerX) / 20;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
            });
        });

        // 添加滚动渐入效果
        document.addEventListener('DOMContentLoaded', function() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            });

            document.querySelectorAll('.hero-section > *').forEach(el => {
                observer.observe(el);
            });
        });

        // 修改打字机效果，保留 HTML 标签
        function typeWriter(element, text, speed = 50) {
            const originalHTML = element.innerHTML;
            element.innerHTML = '';
            let textContent = element.textContent;
            
            // 创建临时元素来获取纯文本
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = originalHTML;
            const plainText = tempDiv.textContent;
            
            let i = 0;
            function type() {
                if (i < plainText.length) {
                    element.innerHTML = originalHTML.substring(0, i + 1);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // 当页面加载完成后执行打字机效果
        window.addEventListener('load', () => {
            const description = document.querySelector('.hero-description');
            typeWriter(description, description.textContent);
        });

        // 图片画廊功能
        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('click', () => {
                const lightbox = document.createElement('div');
                lightbox.className = 'lightbox';
                const img = document.createElement('img');
                img.src = item.querySelector('img').src;
                lightbox.appendChild(img);
                document.body.appendChild(lightbox);
                
                lightbox.addEventListener('click', () => {
                    lightbox.remove();
                });
                
                setTimeout(() => lightbox.classList.add('active'), 10);
            });
        });

        // 更新年代内容数据
        const eraContent = {
            qin: {
                title: "秦朝时期（公元前221年-公元前206年）",
                content: "秦朝时期，横州设郡县制度，成为重要的行政区划。秦始皇统一六国后，为加强对南方的统治，在横州设立行政机构，开始了历史上第一个中央集权统治时期。这一时期的主要特点是建立起统一的行政体系，推行法制建设。",
                details: [
                    "设立郡县制度，确立行政建制",
                    "修建驿站要道，完善交通网络",
                    "统一文字度量，促进文化交流",
                    "推行法制设，维护社会秩序"
                ],
                image: "https://29252621.s21i.faiusr.com/4/ABUIABAEGAAg1Py6mQYohKHg9AEwhQo41wU.png"
            },
            han: {
                title: "汉代时期（公元前202年-公元220年）",
                content: "汉代时期，横州发展为南方重要的军事和文化中心。这一时期，横州成为连接中原与南方的重要枢纽，促进了经济文化的交流。汉代的横州不仅是军事要地，更是文化传播的重要基地。",
                details: [
                    "发展农业生产，改善民生",
                    "促进商贸往来，繁荣经济",
                    "加强文化交流，传播文明",
                    "完善交通网络，便利往来"
                ],
                image: "https://gd-hbimg.huaban.com/9d77356deadafbe26facd3a83fe87094a9a80f479fc32-j5Kx3P_fw658"
            },
            tang: {
                title: "唐宋时期（618年-1279年）",
                content: "唐宋时期是横州发展的黄金时代，经济繁荣，文化昌盛。这一时期的横州不仅是重要的商贸中心，还是文化艺术的重要发展地。唐宋时期的横州见证了中国封建社会的繁荣与发展。",
                details: [
                    "商贸活动繁荣，市场发达",
                    "文化艺术发展，人才辈出",
                    "教育事业兴盛，文化昌明",
                    "手工业发达，技艺精湛"
                ],
                image: "https://ts1.cn.mm.bing.net/th/id/R-C.8cb34a43d302968b02479ff28042d510?rik=%2bebDyjTxBEmuhA&riu=http%3a%2f%2fp1.ssl.cdn.btime.com%2ft01041127695cb05d2f.jpg%3fsize%3d640x267&ehk=Sbhibg3EDjto4%2bZPeMMMPApSsvN5cb6owaF73PLBUK4%3d&risl=&pid=ImgRaw&r=0"
            },
            ming: {
                title: "明清时期（1368年-1911年）",
                content: "明清时期的横州继续发展，城市建设不断完善，商贸往来频繁。这一时期，横州的农业和手工业都取得了显著发展，城市规模不断扩大，文化教育更加普及。",
                details: [
                    "农业技术进步，产量提高",
                    "手工业发展，工艺精进",
                    "商业贸易繁荣，市场繁华",
                    "文化教育发展，人才辈出"
                ],
                image: "https://ts1.cn.mm.bing.net/th/id/R-C.50a228ce632037d62f88a0c97ae9d37b?rik=C0k0CaXOVWb7Dw&riu=http%3a%2f%2fpic.yupoo.com%2ffotomag%2f0b1347b2%2f1a4f9534.jpg&ehk=cILo7cryugaju%2bN8xg12rxBiwcOhXUQqC4GbEAZAxTw%3d&risl=&pid=ImgRaw&r=0"
            },
            modern: {
                title: "近现代（1912年至今）",
                content: "近现代的横州经历了翻天覆地的变化，从传统农业社会逐步发展为现代化城市。改革开放后，横州在经济、文化、教育等各方面都取得了巨大进步，城市面貌焕然一新。",
                details: [
                    "工业化发展，经济腾飞",
                    "教育现代化，科技进步",
                    "基础设施完善，交通便利",
                    "城市化进程加快，面貌更新"
                ],
                image: "https://i.weather.com.cn/images/mobile/mtqtj/2021/06/01/20210601095208993AAD08E45CA421F3BEED8F48E1A26C.jpg"
            }
        };

        // 更新内容展示函数
        function updateEraContent(era) {
            const content = eraContent[era];
            const eraContentDiv = document.querySelector('.era-content');
            
            if (!eraContentDiv) return;

            // 添加退出动画
            eraContentDiv.classList.remove('show');
            eraContentDiv.style.opacity = '0';
            eraContentDiv.style.transform = 'translateY(20px)';

            // 等待退出动画完成后更新内容
            setTimeout(() => {
                // 更新内容
                eraContentDiv.innerHTML = `
                    <div class="era-image-container">
                        <img src="${content.image}" alt="${content.title}" 
                            onerror="this.src='https://via.placeholder.com/800x400?text=历史图片'"
                            style="opacity: 0; transform: scale(0.95);">
                    </div>
                    <div class="era-text-content" style="opacity: 0; transform: translateY(20px);">
                        <div>
                            <h3>${content.title}</h3>
                            <p>${content.content}</p>
                        </div>
                        <div class="era-details">
                            <h4>重要特征</h4>
                            <ul>
                                ${content.details.map(detail => `
                                    <li>
                                        <i class="fas fa-check-circle"></i>
                                        <span>${detail}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="scroll-indicator">
                        ${Array(5).fill(0).map((_, i) => `
                            <div class="scroll-dot ${i === Array.from(document.querySelectorAll('.era-btn')).findIndex(btn => btn.classList.contains('active')) ? 'active' : ''}"></div>
                        `).join('')}
                    </div>
                `;

                // 获取新添加的元素
                const img = eraContentDiv.querySelector('img');
                const textContent = eraContentDiv.querySelector('.era-text-content');

                // 使用 requestAnimationFrame 确保DOM更新后再添加动画
                requestAnimationFrame(() => {
                    // 添加进入动画
                    eraContentDiv.classList.add('show');
                    eraContentDiv.style.opacity = '1';
                    eraContentDiv.style.transform = 'translateY(0)';

                    // 图片动画
                    if (img) {
                        img.style.transition = 'all 0.8s ease';
                        requestAnimationFrame(() => {
                            img.style.opacity = '1';
                            img.style.transform = 'scale(1)';
                        });
                    }

                    // 文字内容动画
                    if (textContent) {
                        textContent.style.transition = 'all 0.8s ease 0.2s';
                        requestAnimationFrame(() => {
                            textContent.style.opacity = '1';
                            textContent.style.transform = 'translateY(0)';
                        });
                    }
                });
            }, 300); // 等待退出动画完成
        }

        // 更新CSS样式
        const additionalStyles = `
            .era-content {
                transition: all 0.5s ease;
            }

            .era-content .era-image-container img {
                transition: all 0.8s ease;
            }

            .era-content .era-text-content {
                transition: all 0.8s ease 0.2s;
            }

            .era-content.show {
                opacity: 1;
                transform: translateY(0);
            }

            .era-content .era-details li {
                opacity: 0;
                transform: translateX(-20px);
                transition: all 0.3s ease;
            }

            .era-content.show .era-details li {
                opacity: 1;
                transform: translateX(0);
            }

            /* 为每个列表项添加延迟动画 */
            .era-content.show .era-details li:nth-child(1) { transition-delay: 0.3s; }
            .era-content.show .era-details li:nth-child(2) { transition-delay: 0.4s; }
            .era-content.show .era-details li:nth-child(3) { transition-delay: 0.5s; }
            .era-content.show .era-details li:nth-child(4) { transition-delay: 0.6s; }
        `;

        // 添加样式到页面
        document.addEventListener('DOMContentLoaded', function() {
            const style = document.createElement('style');
            style.textContent = additionalStyles;
            document.head.appendChild(style);

            // 初始化年代选择器
            const firstEraBtn = document.querySelector('.era-btn');
            if (firstEraBtn) {
                setTimeout(() => {
                    firstEraBtn.click();
                }, 100);
            }
        });

        // 优化按钮点击事件处理
        document.querySelectorAll('.era-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                
                // 如果按钮已经是激活状态，则不重复触发
                if (this.classList.contains('active')) return;
                
                const era = this.dataset.era;
                if (!eraContent[era]) {
                    console.error('未找到对应的时代内容:', era);
                    return;
                }

                // 移除所有按钮的激活状态
                document.querySelectorAll('.era-btn').forEach(b => b.classList.remove('active'));
                // 添加当前按钮的激活状态
                this.classList.add('active');

                // 创建波纹效果
                const ripple = document.createElement('div');
                ripple.className = 'ripple';
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = (e.clientX - rect.left - size/2) + 'px';
                ripple.style.top = (e.clientY - rect.top - size/2) + 'px';
                this.appendChild(ripple);

                // 更新内容
                updateEraContent(era);

                // 清除波纹效果
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // 添加按钮点击波纹效果
        document.querySelectorAll('.era-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                const ripple = document.createElement('div');
                ripple.classList.add('ripple');
                
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.width = ripple.style.height = `${size}px`;
                ripple.style.left = `${x}px`;
                ripple.style.top = `${y}px`;
                
                this.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // 返回顶部按钮功能
        const backToTop = document.createElement('div');
        backToTop.className = 'back-to-top';
        backToTop.innerHTML = '<i class="fas fa-arrow-up"></i>';
        document.body.appendChild(backToTop);

        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });

        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // 添加图片懒加��
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        observer.unobserve(img);
                    }
                });
            });

            images.forEach(img => imageObserver.observe(img));
        });

        // 历史里程碑动画
        document.addEventListener('DOMContentLoaded', function() {
            const milestones = document.querySelectorAll('.milestone');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('show');
                    }
                });
            }, {
                threshold: 0.5
            });

            milestones.forEach(milestone => {
                observer.observe(milestone);
            });
        });

        // 数字增长动画
        let animationExecuted = false;  // 加标志位

        function animateNumbers() {
            if (animationExecuted) return;  // 如果已执行过，直接返回
            
            const statNumbers = document.querySelectorAll('.stat-number');
            
            statNumbers.forEach(number => {
                const target = parseInt(number.getAttribute('data-value'));
                let current = 0;
                const increment = target / 50; // 减少步进次数，使动画更流畅
                const duration = 1500; // 缩短动画时间
                const stepTime = duration / 50;
                
                number.textContent = '0'; // 设置初始值
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        clearInterval(timer);
                        current = target;
                        number.textContent = `${Math.round(current)}+`;
                    } else {
                        number.textContent = Math.round(current);
                    }
                }, stepTime);
            });
            
            animationExecuted = true;
        }

        // 修改观察者触发逻辑
        const statsContainer = document.querySelector('.stats-container');
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !animationExecuted) {
                    animateNumbers();
                }
            });
        }, {
            threshold: 0.5,
            rootMargin: '0px'
        });

        statsObserver.observe(statsContainer);

        // 优化卡片悬停效果
        document.querySelectorAll('.history-card').forEach(card => {
            let isHovering = false;
            
            card.addEventListener('mouseenter', () => {
                isHovering = true;
            });
            
            card.addEventListener('mousemove', (e) => {
                if (!isHovering) return;
                
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = (y - centerY) / 30; // 减小旋转角度
                const rotateY = -(x - centerX) / 30;
                
                card.style.transform = `
                    perspective(1000px) 
                    rotateX(${rotateX}deg) 
                    rotateY(${rotateY}deg) 
                    translateZ(10px)
                `;
            });
            
            card.addEventListener('mouseleave', () => {
                isHovering = false;
                card.style.transform = 'none';
                card.style.transition = 'transform 0.5s ease';
            });
        });

        // 更新图片加载错误处理的默认图片
        document.querySelectorAll('img').forEach(img => {
            img.onerror = function() {
                this.src = 'https://via.placeholder.com/800x400?text=历史图片';  // 使用在线占位图服务
                this.alt = '图片加载失败';
            };
        });

        // 更新加载状态和错误处理中的默认图片
        document.addEventListener('DOMContentLoaded', () => {
            const defaultImage = 'https://via.placeholder.com/800x400?text=历史图片';
            document.querySelectorAll('img').forEach(img => {
                img.addEventListener('error', function() {
                    if (this.src !== defaultImage) {
                        this.src = defaultImage;
                        this.alt = '图片加载失败';
                    }
                });
            });

            // 处理统计数字初始化
            document.querySelectorAll('.stat-number').forEach(number => {
                number.textContent = '';
            });
        });

        // 历史卡片详细内容数据
        const historyCardDetails = {
            ancient: {
                title: "远古时期",
                subtitle: "文明起源",
                period: "新石器时代",
                content: "横州最早的人类活动可以追溯到新石器时，这片土地见证了华南地区早期文明的发展。考古发现表明，早在数千年前，这里就有先民繁衍生息。",
                details: [
                    "发现多处新石器时代遗址",
                    "出土大量石器和陶器",
                    "发现原始农业活动痕迹",
                    "具有独特的地方文化特色"
                ],
                image: "https://29252621.s21i.faiusr.com/4/ABUIABAEGAAg1Py6mQYohKHg9AEwhQo41wU.png"
            },
            qinhan: {
                title: "秦汉时期",
                subtitle: "行政建",
                period: "秦汉时代",
                content: "秦统一后立郡县，横州成为重要的行政区划。汉代时期，这里发展成为南方重要的军事和文化中心。这一时期奠定了横州的行政地位基础，对后世产生深远影响。",
                details: [
                    "设立郡县制度，确立行政建制",
                    "建立军事要塞，加强边防建设",
                    "发展农业经济，改善民生",
                    "促进文化交流，传播中原文化",
                    "完善交通网络，促进商贸发展",
                    "兴建水利工程，发展农业生产"
                ],
                achievements: [
                    "成为南方重要军事据点",
                    "发展为区域文化中心",
                    "建立完善的行政体系"
                ],
                image: "https://29252621.s21i.faiusr.com/4/ABUIABAEGAAg1Py6mQYohKHg9AEwhQo41wU.png"
            },
            modern: {
                title: "近现代发展",
                subtitle: "城市蜕变",
                period: "改革开放后",
                content: "改革开放以来，横州市经历了翻天覆地的变化。从传统农业社会逐发展为现代化城市，在经济、文化、社会等各个方面都取得了显著成就。",
                details: [
                    "产业结构优化升级",
                    "城市基础设施完善",
                    "教育事业蓬勃发展",
                    "文化产业创新发展",
                    "生态环境持续改善",
                    "对外开放不断扩大"
                ],
                achievements: [
                    "经济快速增长",
                    "城市化进程加快",
                    "人民生活水平提高"
                ],
                image: "path/to/modern-image.jpg"
            }
        };

        // 修改模框内容模板
        function createModalContent(details) {
            return `
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <div class="modal-header">
                        <span class="modal-period-tag">${details.period}</span>
                        <h2>${details.title}</h2>
                        <h3>${details.subtitle}</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-description">${details.content}</p>
                        <div class="details-section">
                            <h4>重要特点：</h4>
                            <ul>
                                ${details.details.map(detail => `<li>${detail}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="achievements-section">
                            <h4>主要成就：</h4>
                            <ul>
                                ${details.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="learn-more-btn">了解更多</button>
                    </div>
                </div>
            `;
        }

        // 添加卡片点击展开详情功能
        document.querySelectorAll('.history-card').forEach(card => {
            const period = card.querySelector('.period-tag').textContent.trim();
            let key = '';
            
            // 根据时期标签匹配数据
            if (period.includes('远古')) key = 'ancient';
            else if (period.includes('秦汉')) key = 'qinhan';
            else if (period.includes('近现代')) key = 'modern';
            
            const details = historyCardDetails[key];
            
            // 添加点击事件
            card.addEventListener('click', () => {
                // 创建模态框
                const modal = document.createElement('div');
                modal.className = 'history-modal';
                modal.innerHTML = createModalContent(details);
                
                document.body.appendChild(modal);
                
                // 添加关闭功能
                const closeBtn = modal.querySelector('.close-modal');
                closeBtn.onclick = () => {
                    modal.classList.add('fade-out');
                    setTimeout(() => modal.remove(), 300);
                };
                
                // 点击模态框外部关闭
                modal.onclick = (e) => {
                    if (e.target === modal) {
                        modal.classList.add('fade-out');
                        setTimeout(() => modal.remove(), 300);
                    }
                };
                
                // 动画效果
                setTimeout(() => modal.classList.add('show'), 10);
            });
        });

        // 添加详情模态框
        const figureModal = document.querySelector('.figure-modal');
        const closeModalBtn = figureModal.querySelector('.close-modal');
        closeModalBtn.addEventListener('click', () => {
            figureModal.style.display = 'none';
        });

        // 添加详情模态框内容
        const figureModalBody = figureModal.querySelector('.modal-body');
        const figureCards = document.querySelectorAll('.figure-card');
        figureCards.forEach(card => {
            card.addEventListener('click', () => {
                const category = card.getAttribute('data-category');
                const details = historyCardDetails[category];
                figureModalBody.innerHTML = createModalContent(details);
                figureModal.style.display = 'block';
            });
        });

        // 添加分类筛选器
        const figureFilter = document.querySelector('.figure-filter');
        const figureCardsContainer = document.querySelector('.historical-figures');
        const figureCardsArray = Array.from(figureCardsContainer.children);

        figureFilter.addEventListener('click', (e) => {
            e.preventDefault();
            if (e.target.classList.contains('filter-btn')) {
                const filter = e.target.getAttribute('data-filter');
                figureCardsArray.forEach(card => {
                    if (filter === 'all' || card.getAttribute('data-category') === filter) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
                figureCardsContainer.innerHTML = figureCardsArray.map(card => card.outerHTML).join('');
            }
        });

        // 分页相关变量
        let currentPage = 1;
        const cardsPerPage = 4; // 每页显示4个卡片
        let filteredCards = [];

        // 更新分页函数
        function updatePagination() {
            const totalPages = Math.ceil(filteredCards.length / cardsPerPage);
            const pageNumbers = document.querySelector('.page-numbers');
            
            // 清空页码
            pageNumbers.innerHTML = '';
            
            // 只有当总页数大于1时才显示分页
            if (totalPages > 1) {
                for (let i = 1; i <= totalPages; i++) {
                    const span = document.createElement('span');
                    span.textContent = i;
                    span.classList.toggle('active', i === currentPage);
                    span.addEventListener('click', () => {
                        currentPage = i;
                        updateDisplay();
                        updatePaginationButtons();
                    });
                    pageNumbers.appendChild(span);
                }
            }
            
            updatePaginationButtons();
            updateDisplay();
        }

        // 更新分页按钮状态
        function updatePaginationButtons() {
            const totalPages = Math.ceil(filteredCards.length / cardsPerPage);
            const prevBtn = document.querySelector('.prev-page');
            const nextBtn = document.querySelector('.next-page');
            
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
            
            // 更新页码激活状态
            document.querySelectorAll('.page-numbers span').forEach((span, index) => {
                span.classList.toggle('active', index + 1 === currentPage);
            });
        }

        // 更新显示函数
        function updateDisplay() {
            const start = (currentPage - 1) * cardsPerPage;
            const end = start + cardsPerPage;
            
            // 隐藏所有卡片
            document.querySelectorAll('.figure-card').forEach(card => {
                card.classList.add('hidden');
                setTimeout(() => {
                    card.style.display = 'none';
                }, 300);
            });
            
            // 显示当前页的卡片
            setTimeout(() => {
                filteredCards.slice(start, end).forEach((card, index) => {
                    card.style.display = 'block';
                    setTimeout(() => {
                        card.classList.remove('hidden');
                    }, index * 100);
                });
            }, 300);
        }

        // 筛选功能
        function filterCards(category) {
            const allCards = Array.from(document.querySelectorAll('.figure-card'));
            
            // 先将所有卡片隐藏
            allCards.forEach(card => {
                card.classList.add('hidden');
            });
            
            // 延迟显示符合条件的卡片
            setTimeout(() => {
                if (category === 'all') {
                    filteredCards = allCards;
                } else {
                    filteredCards = allCards.filter(card => 
                        card.dataset.category === category
                    );
                }
                
                // 显示符合条件的卡片
                filteredCards.forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.remove('hidden');
                    }, index * 100);
                });
                
                // 重置到第一页
                currentPage = 1;
                updatePagination();
            }, 300);
        }

        // 初始化事件监听器
        document.addEventListener('DOMContentLoaded', () => {
            // 初始化筛选器按钮
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => 
                        b.classList.remove('active')
                    );
                    btn.classList.add('active');
                    filterCards(btn.dataset.filter);
                });
            });
            
            // 初始化分页按钮
            const prevBtn = document.querySelector('.prev-page');
            const nextBtn = document.querySelector('.next-page');
            
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    updateDisplay();
                    updatePaginationButtons();
                }
            });
            
            nextBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredCards.length / cardsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    updateDisplay();
                    updatePaginationButtons();
                }
            });
            
            // 初始化显示所有卡片
            filterCards('all');
        });

        // 添加页面切换动画
        const addTransitionStyles = () => {
            const style = document.createElement('style');
            style.textContent = `
                .figure-card {
                    transition: opacity 0.3s ease, transform 0.3s ease;
                }
                
                .pagination span {
                    transition: all 0.3s ease;
                }
                
                .pagination span:hover {
                    background: rgba(40, 167, 69, 0.1);
                }
                
                .pagination span.active {
                    background: #28a745;
                    color: white;
                    transform: scale(1.1);
                }
            `;
            document.head.appendChild(style);
        };

        // 在页面加载时添加过渡动画样式
        document.addEventListener('DOMContentLoaded', addTransitionStyles);

        // 修复模态框相关代码
        function createModalContent(details) {
            if (!details) return '';
            
            return `
                <div class="modal-header">
                    <h2>${details.title}</h2>
                    <span class="modal-period">${details.period}</span>
                </div>
                <div class="modal-description">
                    <p>${details.content}</p>
                </div>
                <div class="modal-achievements">
                    <h3>主要成就</h3>
                    <ul>
                        ${details.achievements ? 
                            details.achievements.map(achievement => 
                                `<li>${achievement}</li>`
                            ).join('') : 
                            '<li>暂无记录</li>'
                        }
                    </ul>
                </div>
                <div class="modal-details">
                    <h3>历史细节</h3>
                    <ul>
                        ${details.details ? 
                            details.details.map(detail => 
                                `<li>${detail}</li>`
                            ).join('') : 
                            '<li>暂无记录</li>'
                        }
                    </ul>
                </div>
            `;
        }

        // 优化模态框显示和隐藏
        function showModal(content) {
            const modal = document.querySelector('.figure-modal');
            const modalBody = modal.querySelector('.modal-body');
            
            modalBody.innerHTML = content;
            modal.style.display = 'flex';
            
            // 使用 requestAnimationFrame 确保过渡动画正常工作
            requestAnimationFrame(() => {
                modal.classList.add('active');
            });
        }

        function hideModal() {
            const modal = document.querySelector('.figure-modal');
            modal.classList.remove('active');
            
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300); // 等待过渡动画完成
        }

        // 更新详情按钮事件监听器
        document.querySelectorAll('.details-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                
                const card = btn.closest('.figure-card');
                const category = card.dataset.category;
                const details = historyCardDetails[category];
                
                if (details) {
                    showModal(createModalContent(details));
                }
            });
        });

        // 更新模态框关闭事件
        document.querySelector('.close-modal').addEventListener('click', (e) => {
            e.preventDefault();
            hideModal();
        });

        document.querySelector('.figure-modal').addEventListener('click', (e) => {
            if (e.target.classList.contains('figure-modal')) {
                hideModal();
            }
        });
    </script>

</body>
</html>
